(window.webpackJsonpdrawing=window.webpackJsonpdrawing||[]).push([[0],{236:function(e,t,n){e.exports=n(522)},241:function(e,t,n){},246:function(e,t){},248:function(e,t){},283:function(e,t){},284:function(e,t){},519:function(e,t){},522:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),l=(n(241),n(31)),i=n(214),u=n(549),s=n(227),d=n.n(s),E=n(228),h=n.n(E),f=n(15),p={SET_COLOR:"SET_COLOR",SET_WIDTH:"SET_WIDTH",SET_CLEAR:"SET_CLEAR",SET_ROOM:"SET_ROOM",SET_ERASER:"SET_ERASER",SET_PEN:"SET_PEN",ALL:"ALL"},m={ROOM_LENGTH:6,CHARSET:"0123456789"},O={BROADCAST:"broadcast"},y="#ffffff",v=50;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w={color:"#B80000",width:2,clear:!1,room:""};function S(e,t){switch(t.type){case p.SET_COLOR:return b({},e,{color:t.payload});case p.SET_WIDTH:return b({},e,{width:t.payload});case p.SET_CLEAR:return b({},e,{clear:t.payload});case p.SET_ROOM:return b({},e,{room:t.payload});case p.SET_ERASER:return b({},e,{color:y,width:v});case p.SET_PEN:return b({},e,{color:t.payload.color,width:t.payload.width});default:return w}}var T=r.a.createContext(null),C=n(215),R=n.n(C),j=n(216),_=n(217),x=n.n(_),A=n(542),k=n(552),D=n(544),P=n(551),L=n(550),M=n(545),H=n(546),W=n(547),N=n(548),B=n(222),I=n.n(B),G=n(221),J=n.n(G),F=n(223),X=n.n(F),Y=n(224),z=n.n(Y),Q=n(225),U=n.n(Q);var q=function(){var e=Object(a.useContext)(T),t=e.state,n=e.dispatch,o=Object(a.useState)(""),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(a.useState)(!1),d=Object(l.a)(s,2),E=d[0],h=d[1],f=Object(a.useState)(!1),O=Object(l.a)(f,2),g=O[0],b=O[1],w=Object(a.useRef)(t.color),S=Object(a.useRef)(t.width);Object(a.useEffect)(function(){t.color===y&&t.width===v?b(!0):b(!1)},[t.color,t.width]);var C=function(){h(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{bounds:"parent"},r.a.createElement(A.a,{style:{backgroundColor:"white",position:"absolute",left:"42%",display:"inline-flex",flexDirection:"column"}},r.a.createElement(j.GithubPicker,{triangle:"hide",color:t.color,onChangeComplete:function(e,t){w.current=e.hex,n({type:p.SET_COLOR,payload:e.hex}),n({type:p.SET_WIDTH,payload:S.current})}}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(k.a,{title:"Clear Canvas"},r.a.createElement(D.a,{variant:"contained",color:"secondary",onClick:function(){n({type:p.SET_CLEAR,payload:!0}),n({type:p.SET_COLOR,payload:w.current}),n({type:p.SET_WIDTH,payload:S.current})}}," ",r.a.createElement(J.a,null)," ")),r.a.createElement(k.a,{title:"Eraser"},r.a.createElement("div",null,r.a.createElement(D.a,{variant:"contained",color:"default",onClick:function(){w.current=t.color,S.current=t.width,n({type:p.SET_ERASER})},disabled:g}," ",r.a.createElement(I.a,null)," "))),r.a.createElement(k.a,{title:"Pen"},r.a.createElement("div",null,r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){n({type:p.SET_PEN,payload:{color:w.current,width:S.current}})},disabled:!g}," ",r.a.createElement(X.a,null)," ")))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(k.a,{title:"Share your canvas"},r.a.createElement(D.a,{style:{marginRight:"1%"},variant:"contained",color:"primary",onClick:function(){var e=R.a.generate({length:m.ROOM_LENGTH,charset:m.CHARSET});n({type:p.SET_ROOM,payload:e}),h(!0)}}," ",r.a.createElement(z.a,null)," ")),r.a.createElement(k.a,{title:"Join canvas by entering a room code"},r.a.createElement(D.a,{style:{marginRight:"1%"},variant:"contained",color:"primary",onClick:function(){i&&(alert("Ok:)"),n({type:p.SET_ROOM,payload:i}))}}," ",r.a.createElement(U.a,null)," ")),r.a.createElement(P.a,{value:i,placeholder:"Room Code",onMouseDown:function(e){return e.stopPropagation()},onChange:function(e){u(e.target.value)}})))),r.a.createElement(L.a,{open:E,onClose:C},r.a.createElement(M.a,null,"Share this room code"),r.a.createElement(H.a,null,r.a.createElement(W.a,null,t.room)),r.a.createElement(N.a,null,r.a.createElement(D.a,{onClick:C,color:"primary"}," Close "))))},K=n(33),V=n(226),Z=n.n(V)()("http://nodejs.phuongtran.me");var $=r.a.memo(function(){var e=Object(a.useRef)(null),t=Object(a.useContext)(T),n=t.state,o=t.dispatch,c=Object(a.useState)(!1),i=Object(l.a)(c,2),u=i[0],s=i[1],d=Object(a.useState)([]),E=Object(l.a)(d,2),h=E[0],f=E[1];Object(a.useEffect)(function(){var t=e.current;t.width=window.innerWidth,t.height=window.innerHeight},[window.innerHeight,window.innerWidth]),Object(a.useEffect)(function(){if(n.clear){var t=e.current.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height),o({type:p.SET_CLEAR,payload:!1}),Z.emit(O.BROADCAST,{state:n,points:[]})}},[n.clear,o]),Object(a.useEffect)(function(){var t=e.current,a=t.getContext("2d");Z.on(n.room,function(e){e.state.clear&&a.clearRect(0,0,a.canvas.width,a.canvas.height),a.strokeStyle=e.state.color,a.lineWidth=e.state.width;for(var n=0;n<e.points.length;n++)e.points[n+1]&&m(t,e.points[n],e.points[n+1])})},[n.room]);var m=function(e,t,n){var a=e.getContext("2d");a.beginPath(),a.moveTo(t.x*e.width,t.y*e.height),a.lineTo(n.x*e.width,n.y*e.height),a.stroke()},y=function(t){s(!0);var n=b(e.current,t);f(function(e){return[].concat(Object(K.a)(e),[n])})},v=function(t){if(u){var a=e.current,r=a.getContext("2d");r.strokeStyle=n.color,r.lineWidth=n.width,h.length>=2&&m(a,h[h.length-2],h[h.length-1]);var o=b(a,t);f(function(e){return[].concat(Object(K.a)(e),[o])})}},g=function(){n.room&&Z.emit(O.BROADCAST,{state:n,points:h}),s(!1),f([])};function b(e,t){var n=e.getBoundingClientRect();return t.changedTouches?{x:(t.changedTouches[0].clientX-n.left)/e.width,y:(t.changedTouches[0].clientY-n.top)/e.height}:{x:(t.clientX-n.left)/e.width,y:(t.clientY-n.top)/e.height}}return r.a.createElement("div",{className:"canvas",style:{width:"100vw",height:"100vh",cursor:"pointer"}},r.a.createElement("canvas",{ref:e,style:{width:"100%",height:"100%"},onMouseDown:y,onMouseMove:v,onMouseUp:g,onTouchStart:y,onTouchMove:v,onTouchEnd:g}))});var ee=function(){var e=Object(a.useReducer)(S,w),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),s=Object(l.a)(c,2),E=s[0],f=s[1],p=Object(i.useMediaQuery)({minWidth:1024});return r.a.createElement(T.Provider,{value:{state:n,dispatch:o}},r.a.createElement(r.a.Fragment,null,(p||E)&&r.a.createElement(q,null),!p&&r.a.createElement(u.a,{size:"small",style:{position:"absolute",bottom:"1%",right:"1%",backgroundColor:"#6aaf6a",color:"white"},onClick:function(){return f(!E)}},E?r.a.createElement(d.a,null):r.a.createElement(h.a,null)),r.a.createElement($,null)))};var te=function(){return r.a.createElement("div",{className:"App",style:{textAlign:"center",width:"100vw",height:"100vh"}},r.a.createElement(ee,null))};c.a.render(r.a.createElement(te,null),document.getElementById("root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.36f8fc9e.chunk.js.map