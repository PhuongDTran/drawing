{"version":3,"sources":["store/types.js","consts.js","store/store.js","components/Tool.js","components/Canvas.js","components/Display.js","App.js","index.js"],"names":["types","SET_COLOR","SET_WIDTH","SET_CLEAR","SET_ROOM","SET_ERASER","SET_PEN","ALL","ToolConsts","ROOM_LENGTH","CHARSET","CanvasConsts","BROADCAST","BACKGROUND_COLOR","ERASER_WIDTH","initialState","color","width","clear","room","reducer","state","action","type","payload","Context","React","createContext","Tool","useContext","dispatch","useState","roomCode","setRoomCode","open","setOpen","is_erasing","setIsErasing","_color","useRef","_width","useEffect","closeDialog","Fragment","bounds","Paper","style","position","display","backgroundColor","flexDirection","triangle","onChangeComplete","event","current","hex","Tooltip","title","Button","variant","onClick","disabled","marginRight","code","randomstring","generate","length","charset","alert","Input","value","placeholder","onMouseDown","e","stopPropagation","onChange","target","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","socket","io","memo","canvasRef","is_drawing","setIsDrawing","current_path","setCurrentPath","canvas","offsetWidth","height","offsetHeight","ctx","getContext","clearRect","emit","points","on","data","strokeStyle","lineWidth","i","drawLine","start","end","beginPath","moveTo","x","y","lineTo","stroke","startDrawing","pos","getMousePos","prev","draw","stopDrawing","evt","rect","getBoundingClientRect","changedTouches","clientX","left","clientY","top","className","cursor","ref","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","Display","useReducer","showTool","setShowTool","IsDesktop","useMediaQuery","minWidth","Provider","Fab","size","bottom","right","App","textAlign","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.af4f5cc2.chunk.js","sourcesContent":["export const types = {\n  SET_COLOR:\"SET_COLOR\",\n  SET_WIDTH: \"SET_WIDTH\",\n  SET_CLEAR: \"SET_CLEAR\",\n  SET_ROOM: \"SET_ROOM\",\n  SET_ERASER: \"SET_ERASER\",\n  SET_PEN: \"SET_PEN\",\n  ALL: \"ALL\"\n}","export const server = {\n  // URL:\"http://nodejs.phuongtran.me\"\n  URL:\"http://localhost:8080\"\n}\n\nexport const ToolConsts = {\n  ROOM_LENGTH: 6,\n  CHARSET: '0123456789'\n}\n\nexport const CanvasConsts = {\n  BROADCAST: \"broadcast\"\n}\n\n//canvas background color\nexport const BACKGROUND_COLOR = \"#ffffff\"\nexport const ERASER_WIDTH = 50","import React from 'react'\nimport {types} from './types'\nimport {BACKGROUND_COLOR, ERASER_WIDTH} from '../consts'\n\nexport const initialState = {\n  color: \"#B80000\",\n  width: 2,\n  clear: false,\n  room: \"\"\n}\n\nexport function reducer (state, action) {\n  switch (action.type) {\n    case types.SET_COLOR:\n      return {...state, color: action.payload}\n    case types.SET_WIDTH:\n      return {...state, width: action.payload}\n    case types.SET_CLEAR:\n      return {...state, clear: action.payload}\n    case types.SET_ROOM:\n      return {...state, room: action.payload}\n    case types.SET_ERASER:\n      return {...state, color: BACKGROUND_COLOR, width: ERASER_WIDTH}\n    case types.SET_PEN:\n      return {...state, color: action.payload.color, width: action.payload.width}\n    // case types.ALL:\n    //   // console.log(action.payload)\n    //   return {...state, color: action.payload.color, width: action.payload.width}\n    default:\n      return initialState\n  }\n}\n\nexport const Context = React.createContext(null)\n\n","import React, { useContext, useState, useRef, useEffect } from 'react'\n\nimport { Context } from '../store/store';\nimport { types } from '../store/types'\nimport randomstring from 'randomstring'\nimport { ToolConsts, BACKGROUND_COLOR, ERASER_WIDTH } from '../consts';\n// components\nimport { GithubPicker } from 'react-color'\nimport Draggable from 'react-draggable';\nimport { Button, Paper, Input, Tooltip } from '@material-ui/core'\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core'\n\n//icons\nimport EraserIcon from '@material-ui/icons/Clear';\nimport DeleteIcon from '@material-ui/icons/DeleteForever';\nimport PenIcon from '@material-ui/icons/Create'\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare'\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom'\n\n\nfunction Tool() {\n  // this is global state. Go to ../store/store.js to see what state is available \n  const { state, dispatch } = useContext(Context)\n  // room code user enters into the HTML Input tag\n  const [roomCode, setRoomCode] = useState(\"\")\n  // open/close dialog\n  const [open, setOpen] = useState(false)\n\n  const [is_erasing, setIsErasing] = useState(false)\n\n\n  const _color = useRef(state.color)\n  const _width = useRef(state.width)\n\n  useEffect( () => {\n    if (state.color === BACKGROUND_COLOR && state.width === ERASER_WIDTH){\n      setIsErasing(true)\n    } else {\n      setIsErasing(false)\n    }\n  }, [state.color, state.width])\n\n  const pickColor = (color, event) => {\n    // update local color when new color picked\n    _color.current = color.hex\n    dispatch({ type: types.SET_COLOR, payload: color.hex })\n    // this dispatch preventing bug when users click Eraser then choose a color\n    // without this dispatch, it would expose Eraser implementation\n    dispatch({ type: types.SET_WIDTH, payload: _width.current })\n  }\n\n  const clearDrawing = () => {\n    dispatch({ type: types.SET_CLEAR, payload: true })\n    //restore color and width\n    dispatch({type: types.SET_COLOR, payload: _color.current})\n    dispatch({type: types.SET_WIDTH, payload: _width.current})\n  }\n\n  // generate and update room code in global state\n  const handleShare = () => {\n    let code = randomstring.generate({ length: ToolConsts.ROOM_LENGTH, charset: ToolConsts.CHARSET })\n    dispatch({ type: types.SET_ROOM, payload: code })\n    setOpen(true)\n  }\n\n  const handleRoomInput = () => {\n    if (roomCode) {\n      alert(\"Ok:)\")\n      dispatch({ type: types.SET_ROOM, payload: roomCode })\n    }\n  }\n\n  // use entered room code\n  const roomChange = (e) => {\n    setRoomCode(e.target.value)\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n  \n  const setEraser = () => {\n    // save current color and width to restore later\n    _color.current = state.color\n    _width.current = state.width\n    dispatch({ type: types.SET_ERASER })\n  }\n\n  const setPen = () => {\n    dispatch({ type: types.SET_PEN, payload: { color: _color.current, width: _width.current } })\n  }\n\n  return (\n    <React.Fragment>\n      <Draggable bounds='parent'>\n        <Paper style={{ position: \"absolute\", display: \"inline-flex\", backgroundColor: \"white\", flexDirection: \"column\" }}>\n          {/* <TwitterPicker triangle=\"hide\" color={state.color} onChangeComplete={pickColor} /> */}\n          <GithubPicker triangle=\"hide\" color={state.color} onChangeComplete={pickColor} />\n          <div style={{ display: 'flex', flexDirection: \"row\" }}>\n            <Tooltip title=\"Clear Canvas\">\n              <Button variant=\"contained\" color=\"secondary\" onClick={clearDrawing}> <DeleteIcon /> </Button>\n            </Tooltip>\n\n            <Tooltip title=\"Eraser\">\n              {/* https://github.com/mui-org/material-ui/issues/8416 */}\n              <div>\n                <Button variant=\"contained\" color=\"default\" onClick={setEraser} disabled={is_erasing}> <EraserIcon /> </Button>\n              </div>\n            </Tooltip>\n\n            <Tooltip title=\"Pen\">\n              {/* https://github.com/mui-org/material-ui/issues/8416 */}\n              <div>\n                <Button variant=\"contained\" color=\"primary\" onClick={setPen} disabled={!is_erasing}> <PenIcon /> </Button>\n              </div>\n            </Tooltip>\n          </div>\n          <div style={{ display: 'flex', flexDirection: \"row\" }}>\n            <Tooltip title=\"Share your canvas\">\n              <Button style={{ marginRight: \"1%\" }} variant=\"contained\" color=\"primary\" onClick={handleShare}> <ScreenShareIcon /> </Button>\n            </Tooltip>\n            <Tooltip title=\"Join canvas by entering a room code\">\n              <Button style={{ marginRight: '1%' }} variant=\"contained\" color=\"primary\" onClick={handleRoomInput}> <MeetingRoomIcon /> </Button>\n            </Tooltip>\n            {/* https://github.com/atlassian/react-beautiful-dnd/issues/110#issuecomment-331304943 */}\n            <Input value={roomCode} placeholder=\"Room Code\" onMouseDown={e => e.stopPropagation()} onChange={roomChange} />\n          </div>\n        </Paper>\n      </Draggable>\n\n      {/* a dialog display the generated room code when user clicks share button */}\n      <Dialog open={open} onClose={closeDialog}>\n        <DialogTitle>{\"Share this room code\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>{state.room}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeDialog} color=\"primary\"> Close </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  )\n}\n\nexport default Tool","import React, { useRef, useState, useContext, useEffect } from 'react'\nimport { Context } from '../store/store'\nimport { types } from '../store/types'\n\nimport io from 'socket.io-client'\nimport { server, CanvasConsts } from '../consts'\n\nconst socket = io(server.URL)\n\nfunction Canvas() {\n\n  const canvasRef = useRef(null)\n  // this is global state. Go to ../store/store.js to see what state is available \n  const { state, dispatch } = useContext(Context)\n  // is user drawing?\n  const [is_drawing, setIsDrawing] = useState(false)\n  // the current path. a path is defined when user press the mouse, drag, and release.\n  const [current_path, setCurrentPath] = useState([])\n\n\n  // make canvas wider\n  useEffect(() => {\n    const canvas = canvasRef.current\n    //https://stackoverflow.com/questions/10214873/make-canvas-as-wide-and-as-high-as-parent\n    canvas.width = canvas.offsetWidth\n    canvas.height = canvas.offsetHeight\n  }, [])\n\n  // clear canvas\n  useEffect(() => {\n    if (state.clear) {\n      const canvas = canvasRef.current\n      const ctx = canvas.getContext('2d')\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n      dispatch({ type: types.SET_CLEAR, payload: false })\n      socket.emit(CanvasConsts.BROADCAST, { state: state, points: [] })\n    }\n  }, [state.clear, dispatch])\n\n  //listening on server socket\n  useEffect(() => {\n    const canvas = canvasRef.current\n    const ctx = canvas.getContext('2d')\n\n    socket.on(state.room, data => {\n      if (data.state.clear) {\n        // clear the entire canvas\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n      }\n\n      // set color and width which are sent from the host (who shares the canvas)\n      ctx.strokeStyle = data.state.color\n      ctx.lineWidth = data.state.width\n\n      for (let i = 0; i < data.points.length; i++)\n        if (data.points[i + 1]) {\n          drawLine(ctx, data.points[i], data.points[i + 1])\n        }\n    })\n  }, [state.room])\n\n  // draw a line from start to end\n  const drawLine = (ctx, start, end) => {\n    ctx.beginPath()\n    ctx.moveTo(start.x, start.y)\n    ctx.lineTo(end.x, end.y)\n    ctx.stroke()\n  }\n\n  // triggered when the mouse pressed down\n  // get current mouse's location, and signal drawing has begun\n  const startDrawing = (e) => {\n    setIsDrawing(true)\n    const canvas = canvasRef.current\n    let pos = getMousePos(canvas, e)\n    setCurrentPath(prev => [...prev, pos])\n  }\n\n  // draw lines to current mouse location\n  const draw = (e) => {\n    if (is_drawing) {\n      const canvas = canvasRef.current\n      const ctx = canvas.getContext('2d')\n      // make sure using local color and width when drawing\n      ctx.strokeStyle = state.color\n      ctx.lineWidth = state.width\n      if (current_path.length >= 2) {\n        drawLine(ctx, current_path[current_path.length - 2], current_path[current_path.length - 1])\n      }\n      let pos = getMousePos(canvas, e)\n      setCurrentPath(prev => [...prev, pos])\n    }\n  }\n\n  // signal drawing has stoped\n  const stopDrawing = () => {\n    if (state.room) {\n      // only emit when a path finished\n      socket.emit(CanvasConsts.BROADCAST, { state: state, points: current_path })\n    }\n    setIsDrawing(false)\n    setCurrentPath([])\n  }\n\n  // https://stackoverflow.com/questions/17130395/real-mouse-position-in-canvas\n  function getMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    if (evt.changedTouches) {\n      return {\n        x: evt.changedTouches[0].clientX - rect.left,\n        y: evt.changedTouches[0].clientY - rect.top\n      }\n    }\n\n    return {\n      x: evt.clientX - rect.left,\n      y: evt.clientY - rect.top\n    }\n  }\n\n  return (\n    <div className='canvas'   style={{width:\"100vw\", height: \"100vh\",  cursor: \"pointer\"}}>\n      <canvas\n        ref={canvasRef}\n        style={{ width: '100%', height: '100%' }}\n        onMouseDown={startDrawing}\n        onMouseMove={draw}\n        onMouseUp={stopDrawing}\n        onTouchStart={startDrawing}\n        onTouchMove={draw}\n        onTouchEnd={stopDrawing}\n      />\n    </div>\n  )\n}\n\nexport default React.memo(Canvas)","import React, { useReducer, useState } from 'react'\nimport { useMediaQuery } from 'react-responsive'\n\nimport { Fab } from '@material-ui/core'\nimport DownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport UpIcon from '@material-ui/icons/KeyboardArrowUp';\n\nimport { Context, initialState, reducer } from '../store/store'\n\n// components\nimport Tool from './Tool'\nimport Canvas from './Canvas'\n\nfunction Display() {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const [showTool, setShowTool] = useState(false)\n  const IsDesktop = useMediaQuery({ minWidth: 1024 })\n\n  return (\n    <Context.Provider value={{ state, dispatch }}>\n      <React.Fragment>\n        {(IsDesktop || showTool) && <Tool />}\n        {!IsDesktop && (\n          <Fab\n            size=\"small\"\n            style={{ position: 'absolute', bottom: '1%', right: '1%', backgroundColor: '#6aaf6a', color: 'white' }}\n            onClick={() => setShowTool(!showTool)}>\n            {showTool ? <DownIcon /> : <UpIcon />}\n          </Fab>\n        )}\n        <Canvas />\n      </React.Fragment>\n    </Context.Provider>\n  )\n}\n\nexport default Display;","import React from 'react';\n\nimport Display from './components/Display'\n\nfunction App() {\n  return (\n    <div className=\"App\" style={{textAlign: 'center', width: '100vw', height: '100vh'}}>\n      <Display/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}